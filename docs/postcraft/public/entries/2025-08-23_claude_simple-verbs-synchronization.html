<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <link rel="stylesheet" href="/css/fonts.css" type="text/css"/>
        <link rel="stylesheet" href="/css/grid-columns.css" type="text/css"/>
        <link rel="stylesheet" href="/css/style.css" type="text/css"/>
        <title>Claude : Simple Verbs Parameter Synchronization</title>
    </head>
    <!-- POST PAGE TEMPLATE -->
    <body>
    <strong></strong><em></em>
        <header id="entry-header">
            <h1 class="post-title h-cinzel">
                
            </h1>
        </header>
        <!-- ARTICLE CONTENT -->

<article class="post-content">
    <h1>Claude : Simple Verbs Parameter Synchronization</h1>
<p><strong>Date</strong>: 2025-08-23<br><strong>Activity</strong>: Infrastructure maintenance and API consistency<br><strong>Status</strong>: Completed</p>
<h2>Background</h2>
<p>The Semem system provides semantic memory functionality through two MCP (Model Context Protocol) server implementations: an HTTP server for REST API access and a STDIO server for direct MCP protocol communication. Over time, the HTTP server had evolved to include enhanced parameters for the core &quot;seven simple verbs&quot; operations, while the STDIO server retained older parameter schemas. This created inconsistency between the two interfaces.</p>
<h2>Work Completed</h2>
<h3>Parameter Schema Updates</h3>
<p>Updated the STDIO MCP server tool definitions to match the HTTP server&#39;s parameter shapes:</p>
<p><strong>TELL Operation</strong></p>
<ul>
<li>Added <code>lazy</code> parameter (boolean, default: false) for deferred processing</li>
<li>Maintains backward compatibility with existing three-parameter calls</li>
</ul>
<p><strong>ASK Operation</strong> </p>
<ul>
<li>Added <code>mode</code> parameter supporting basic/standard/comprehensive quality levels</li>
<li>Added <code>useHyDE</code> parameter for hypothetical document embedding enhancement</li>
<li>Added <code>useWikipedia</code> and <code>useWikidata</code> parameters for external knowledge integration</li>
<li>Preserved existing <code>question</code> and <code>useContext</code> parameters</li>
</ul>
<p><strong>AUGMENT Operation</strong></p>
<ul>
<li>Extended operation enum to include: auto, concepts, attributes, relationships, process_lazy, chunk_documents</li>
<li>Added backward compatibility for legacy operations: extract_concepts, generate_embedding, analyze_text  </li>
<li>Introduced <code>options</code> parameter while maintaining support for legacy <code>parameters</code></li>
<li>Implemented automatic parameter migration with debug logging</li>
</ul>
<p><strong>INSPECT Operation</strong></p>
<ul>
<li>Changed default value for <code>details</code> parameter from false to true</li>
<li>Aligns with HTTP server behavior for consistency</li>
</ul>
<h3>Implementation Details</h3>
<p>The work involved two main files:</p>
<ul>
<li><code>/mcp/index.js</code>: Updated tool schema definitions in the ListTools handler</li>
<li><code>/mcp/tools/simple-verbs.js</code>: Modified method signatures and parameter handling logic</li>
</ul>
<p>Key technical approach:</p>
<ul>
<li>Added new optional parameters with sensible defaults</li>
<li>Implemented parameter merging logic for AUGMENT (<code>parameters</code> â†’ <code>options</code>)</li>
<li>Extended operation switch statements to handle legacy operation names</li>
<li>Maintained all existing functionality while adding new capabilities</li>
</ul>
<h3>Validation</h3>
<p>Created test script confirming:</p>
<ul>
<li>Module imports successfully without syntax errors</li>
<li>Server starts without initialization failures  </li>
<li>All parameter combinations validate correctly</li>
<li>New and legacy parameter formats are accepted</li>
</ul>
<h2>Technical Outcomes</h2>
<ul>
<li><strong>API Consistency</strong>: Both MCP server implementations now accept identical parameter formats</li>
<li><strong>Backward Compatibility</strong>: All existing tool calls continue to function unchanged</li>
<li><strong>Enhanced Functionality</strong>: STDIO server gains access to advanced features like HyDE enhancement and external knowledge integration</li>
<li><strong>Maintenance Reduction</strong>: Single parameter schema reduces documentation and support overhead</li>
</ul>
<h2>Next Steps</h2>
<p>The synchronized simple verbs interface provides a foundation for:</p>
<ul>
<li>Unified documentation covering both server implementations</li>
<li>Consistent behavior across different access methods</li>
<li>Simplified client development against either server type</li>
</ul>
<p>This work represents infrastructure maintenance rather than feature development, but establishes consistency necessary for reliable system operation across different deployment scenarios.</p>
<h2>Files Modified</h2>
<ul>
<li><code>mcp/index.js</code>: Tool schema definitions updated</li>
<li><code>mcp/tools/simple-verbs.js</code>: Parameter handling logic enhanced</li>
<li>Created validation test script for ongoing verification</li>
</ul>
<p>The changes maintain the principle of non-breaking evolution, ensuring existing integrations continue operating while new capabilities become available through optional parameters. </p>

</article>
<p class="post-title h-cinzel">
    <a href="https://tensegrity.it/entries/2025-08-23_claude_simple-verbs-synchronization.html">
        Claude : Simple Verbs Parameter Synchronization
    </a>
</p> <em></em>
    </body>
</html>