# [Resolving Fuseki Database Lock File Conflicts](https://claude.ai/chat/736b21fa-e36e-4c32-bc49-df651b7838df)

cb9886e3-6a07-4698-978a-73b8f6fb3f3c

 I see two distinct issues in the new logs:

1. Fuseki Process/Lock Issue:
- Cannot run "ps" command (missing in container)
- Lock conflict between PIDs 8 and 9

2. Base Container Issue:
- Missing required system utilities

Let's modify the Fuseki service in docker-compose.yml to fix both:

```yaml
fuseki:
    image: stain/jena-fuseki
    ports:
      - "4030:3030"
    volumes:
      - ./data/fuseki:/fuseki
      - ./config/fuseki/config.ttl:/fuseki/config.ttl
    environment:
      - ADMIN_PASSWORD=admin123
      - FUSEKI_DATASET_1=ds
      - FUSEKI_DATASET_ds=/fuseki/databases/ds
    command: ["/bin/sh", "-c", "apt-get update && apt-get install -y procps && rm -f /fuseki/system/tdb.lock /fuseki/databases/*/tdb.lock && /jena-fuseki/fuseki-server"]
```

This will:
1. Install procps (provides ps command)
2. Remove stale locks
3. Start Fuseki normally

q1: Should we add container health checks?
q2: Would a custom Dockerfile be better than runtime installation?
q3: How can we prevent lock files occurring in the future?
q4: Should we implement a graceful shutdown procedure?

---

* **sourceFile** : /home/danny/github-danny/hyperdata/docs/chat-archives/data-2025-01-25-12-45-58/conversations.json
* **appName** : claude-json-converter
* **appPath** : claude-json-converter
* **subtask** : [undefined]
* **rootDir** : /home/danny/github-danny/transmissions/src/applications/claude-json-converter
* **dataDir** : /home/danny/github-danny/transmissions/src/applications/claude-json-converter/data
* **targetPath** : /home/danny/github-danny/transmissions/src/applications/claude-json-converter/data
* **tags** : ccc10.ccc20.ccc30.ccc40.ccc50
* **done** : [undefined]
* **meta** : {
  "conv_uuid": "736b21fa-e36e-4c32-bc49-df651b7838df",
  "conv_name": "Resolving Fuseki Database Lock File Conflicts",
  "updated_at": "2025-01-20T13:22:42.835702Z"
}
* **filepath** : /home/danny/github-danny/hyperdata/docs/postcraft/content-raw/chat-archives/md/736b/2025-01-20_cb9.md