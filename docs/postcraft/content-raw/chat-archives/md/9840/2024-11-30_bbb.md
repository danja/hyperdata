# [Troubleshooting Deployment Configuration Issues](https://claude.ai/chat/98405e21-5cfb-4049-a64b-bf7857af4f40)

bbbdba1d-76fc-40d9-b0ba-1e90e10711f5

 Let's add logging volumes and restart policies:

<antArtifact identifier="docker-compose-logs" type="application/vnd.ant.code" language="yaml" title="Docker compose with logging and restart">
version: "3"
services:
  app:
    build: .
    restart: unless-stopped
    ports:
      - "4000:8311"
    volumes:
      - ./logs/app:/home/myuser/app/logs
    depends_on:
      - fuseki
    environment:
      - FUSEKI_URL=http://fuseki:3030
      - FUSEKI_DATASET=ds
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"

  fuseki:
    image: stain/jena-fuseki
    restart: unless-stopped
    ports:
      - "4030:3030"
    volumes:
      - ./fuseki-data:/fuseki
      - ./config.ttl:/fuseki/config.ttl
      - ./logs/fuseki:/fuseki/logs
    environment:
      - ADMIN_PASSWORD=admin123
      - FUSEKI_DATASET_1=ds
    logging:
      driver: "json-file" 
      options:
        max-size: "10m"
        max-file: "3"

  nginx:
    image: nginx:alpine
    restart: unless-stopped
    ports:
      - "4080:80"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf:ro
      - ./logs/nginx:/var/log/nginx
    depends_on:
      - app
      - fuseki
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
</antArtifact>

Key changes:
- Added restart: unless-stopped for all services
- Added log rotation with 10MB max size, 3 files
- Mapped log directories for each service
- Created persistent volumes for logs

You'll need to create the log directories:
```bash
mkdir -p logs/{app,fuseki,nginx}
```

---

* **sourceFile** : /home/danny/github-danny/hyperdata/docs/chat-archives/data-2025-01-25-12-45-58/conversations.json
* **appName** : claude-json-converter
* **appPath** : claude-json-converter
* **subtask** : [undefined]
* **rootDir** : /home/danny/github-danny/transmissions/src/applications/claude-json-converter
* **dataDir** : /home/danny/github-danny/transmissions/src/applications/claude-json-converter/data
* **targetPath** : /home/danny/github-danny/transmissions/src/applications/claude-json-converter/data
* **tags** : ccc10.ccc20.ccc30.ccc40.ccc50
* **done** : [undefined]
* **meta** : {
  "conv_uuid": "98405e21-5cfb-4049-a64b-bf7857af4f40",
  "conv_name": "Troubleshooting Deployment Configuration Issues",
  "updated_at": "2024-11-30T17:56:57.880728Z"
}
* **filepath** : /home/danny/github-danny/hyperdata/docs/postcraft/content-raw/chat-archives/md/9840/2024-11-30_bbb.md